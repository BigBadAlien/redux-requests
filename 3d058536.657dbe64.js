(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{119:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return u}));var a=n(1),r=n(6),i=(n(0),n(157)),o={title:"Usage with React",description:"React guide for redux-requests - declarative AJAX requests and automatic network state management for single-page applications"},l={id:"guides/usage-with-react",title:"Usage with React",description:"React guide for redux-requests - declarative AJAX requests and automatic network state management for single-page applications",source:"@site/docs/guides/usage-with-react.md",permalink:"/docs/guides/usage-with-react",editUrl:"https://github.com/klis87/redux-requests/edit/master/docusaurus/docs/guides/usage-with-react.md",lastUpdatedBy:"Konrad",lastUpdatedAt:1610499904,sidebar:"docs",previous:{title:"Usage with redux-saga",permalink:"/docs/guides/usage-with-redux-saga"},next:{title:"Usage with Typescript",permalink:"/docs/guides/usage-with-typescript"}},b=[{value:"Introduction",id:"introduction",children:[]},{value:"Installation",id:"installation",children:[]},{value:"Usage",id:"usage",children:[{value:"<code>useQuery</code>",id:"usequery",children:[]},{value:"<code>useMutation</code>",id:"usemutation",children:[]},{value:"<code>RequestsProvider</code>",id:"requestsprovider",children:[]},{value:"<code>RequestsErrorBoundary</code>",id:"requestserrorboundary",children:[]},{value:"<code>useDispatchRequest</code>",id:"usedispatchrequest",children:[]},{value:"<code>Query</code>",id:"query",children:[]},{value:"<code>Mutation</code>",id:"mutation",children:[]}]}],c={rightToc:b};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"introduction"},"Introduction"),Object(i.b)("p",null,"This library is just a Redux addon, so you can use it with any UI library, like React,\nAngular, Vue - whatever will work with Redux will work. However, you might consider using\nsome React helpers which will be described below."),Object(i.b)("h2",{id:"installation"},"Installation"),Object(i.b)("p",null,"To install the package, just run:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"$ npm install @redux-requests/react\n")),Object(i.b)("p",null,"or you can just use CDN: ",Object(i.b)("inlineCode",{parentName:"p"},"https://unpkg.com/@redux-requests/react"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bas"}),"$ npm install react-redux\n")),Object(i.b)("h2",{id:"usage"},"Usage"),Object(i.b)("h3",{id:"usequery"},Object(i.b)("inlineCode",{parentName:"h3"},"useQuery")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"useQuery")," is a hook which uses ",Object(i.b)("inlineCode",{parentName:"p"},"useSelector")," from ",Object(i.b)("inlineCode",{parentName:"p"},"react-redux")," together with ",Object(i.b)("inlineCode",{parentName:"p"},"getQuerySelector")," from\n",Object(i.b)("inlineCode",{parentName:"p"},"redux-requests/core"),". It accepts the same arguments as ",Object(i.b)("inlineCode",{parentName:"p"},"getQuerySelector"),". You could\neasily use ",Object(i.b)("inlineCode",{parentName:"p"},"useSelector")," directly, but ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery")," is slightly less verbose. So, without ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import React from 'react';\nimport { getQuerySelector } from '@redux-requests/core';\nimport { useSelector } from 'react-redux';\n\nconst Books = () => {\n  const books = useSelector(getQuerySelector({ type: 'FETCH_BOOKS' }));\n  // ...\n};\n")),Object(i.b)("p",null,"and with ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import React from 'react';\nimport { useQuery } from '@redux-requests/react';\n\nconst Books = () => {\n  const { data, error, loading, pristine } = useQuery({ type: 'FETCH_BOOKS' });\n  // ...\n};\n")),Object(i.b)("p",null,"As you can see, ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery")," hook is a convenient way to read query state, however it is much more powerful than that, it supports:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"automatic queries reset and abort on component unmount"),Object(i.b)("li",{parentName:"ul"},"automatic query load - that's it, it can dispatch query action automatically for you on component mount"),Object(i.b)("li",{parentName:"ul"},"suspense support"),Object(i.b)("li",{parentName:"ul"},"server side suspense support for SSR - see ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/guides/server-side-rendering#react-suspense"}),"this guide")," for more information"),Object(i.b)("li",{parentName:"ul"},"throwing errors instead of rendering to catch them up by a React error boundary component")),Object(i.b)("p",null,"Above can be configured with extra props:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"autoLoad: boolean")," - default ",Object(i.b)("inlineCode",{parentName:"li"},"false"),", if ",Object(i.b)("inlineCode",{parentName:"li"},"true"),", then query action will be dispatched on component mount automatically, also,\nquery will be dispatched again on ",Object(i.b)("inlineCode",{parentName:"li"},"type")," or ",Object(i.b)("inlineCode",{parentName:"li"},"requestKey")," change, as well as on ",Object(i.b)("inlineCode",{parentName:"li"},"variables")," change, be aware that in order for this to work, you need to pass ",Object(i.b)("inlineCode",{parentName:"li"},"variables")," and ",Object(i.b)("inlineCode",{parentName:"li"},"action")," props (see below)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"variables")," - required when ",Object(i.b)("inlineCode",{parentName:"li"},"autoLoad")," is ",Object(i.b)("inlineCode",{parentName:"li"},"true")," (or you want to use ",Object(i.b)("inlineCode",{parentName:"li"},"load")," callback) and your query action accepts variables, you need to pass them as array, for example\n",Object(i.b)("inlineCode",{parentName:"li"},"variables={['firstVariable', 2, 'thirdVariable']}"),", note that query will be refetched on any variable change, so you must pay attention\nif any of your variables is an object - if yes, it must be memoized, for example by ",Object(i.b)("inlineCode",{parentName:"li"},"useMemo"),", otherwise query would be refetched on\nevery render"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"action")," - necessary if ",Object(i.b)("inlineCode",{parentName:"li"},"autoLoad")," is ",Object(i.b)("inlineCode",{parentName:"li"},"true")," (or you want to use ",Object(i.b)("inlineCode",{parentName:"li"},"load")," callback) and ",Object(i.b)("inlineCode",{parentName:"li"},"type")," is ",Object(i.b)("inlineCode",{parentName:"li"},"string")," (so you don't use Redux action creator library and you have constants)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"autoReset: boolean"),": ",Object(i.b)("inlineCode",{parentName:"li"},"false")," by default, setting to ",Object(i.b)("inlineCode",{parentName:"li"},"true")," will reset query on component unmount, be adviced though that it won't\nreset queries which are cached, also nothing will be reset on unmount if there is any other active component with another ",Object(i.b)("inlineCode",{parentName:"li"},"useQuery")," of the same type"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"suspense: boolean"),": ",Object(i.b)("inlineCode",{parentName:"li"},"false")," by default, setting to ",Object(i.b)("inlineCode",{parentName:"li"},"true")," will activate suspense, which will need to be catched by a ",Object(i.b)("inlineCode",{parentName:"li"},"Suspense")," component"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"throwError: boolean"),": ",Object(i.b)("inlineCode",{parentName:"li"},"false")," by default, setting to ",Object(i.b)("inlineCode",{parentName:"li"},"true")," will throw error on query error, ready to be catched by a React error boundary component"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"suspenseSsr: boolean"),": ",Object(i.b)("inlineCode",{parentName:"li"},"false")," by default, set it to ",Object(i.b)("inlineCode",{parentName:"li"},"true")," if you want to use suspense for SSR, typically you won't do it in every ",Object(i.b)("inlineCode",{parentName:"li"},"useQuery")," but in ",Object(i.b)("inlineCode",{parentName:"li"},"RequestsProvider")," globally")),Object(i.b)("p",null,"To get some more ideas how to use it, see below example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"const fetchBook = id => ({\n  type: 'FETCH_BOOK',\n  request: { url: `/books/${id}` },\n});\n\nconst Book = () => {\n  const {\n    data,\n    error,\n    loading,\n    pristine,\n    load, // callback to dispatch this query action any time\n  } = useQuery({\n    type: 'FETCH_BOOK',\n    action: fetchBook,\n    variables: [1],\n    autoLoad: true,\n    autoReset: true,\n    suspense: true,\n    throwError: true,\n  });\n  // ...\n};\n")),Object(i.b)("p",null,"Note, that unconvenient ",Object(i.b)("inlineCode",{parentName:"p"},"action")," won't be necessary if you use an action creator library."),Object(i.b)("h3",{id:"usemutation"},Object(i.b)("inlineCode",{parentName:"h3"},"useMutation")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"useMutation")," is a hook which uses ",Object(i.b)("inlineCode",{parentName:"p"},"useSelector")," from ",Object(i.b)("inlineCode",{parentName:"p"},"react-redux")," together with ",Object(i.b)("inlineCode",{parentName:"p"},"getMutationSelector")," from\n",Object(i.b)("inlineCode",{parentName:"p"},"redux-requests"),". It accepts the same arguments as ",Object(i.b)("inlineCode",{parentName:"p"},"getMutationSelector"),". Like in case of ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery"),", you could\nrender"),Object(i.b)("p",null,"For example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import React from 'react';\nimport { useMutation } from '@redux-requests/react';\n\nconst Books = () => {\n  const { loading, error } = useMutation({ type: 'DELETE_BOOK' });\n  // ...\n};\n")),Object(i.b)("p",null,"Like in case of ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery"),", ",Object(i.b)("inlineCode",{parentName:"p"},"useMutation")," also accepts some extra props:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"variables")," - required when you want to use ",Object(i.b)("inlineCode",{parentName:"li"},"mutate")," callback) and your mutation action accepts variables, you need to pass them as array, for example\n",Object(i.b)("inlineCode",{parentName:"li"},"variables={['firstVariable', 2, 'thirdVariable']}")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"action")," - necessary if you want to use ",Object(i.b)("inlineCode",{parentName:"li"},"mutate")," callback and ",Object(i.b)("inlineCode",{parentName:"li"},"type")," is ",Object(i.b)("inlineCode",{parentName:"li"},"string")," (so you don't use Redux action creator library and you have constants)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"autoReset: boolean"),": ",Object(i.b)("inlineCode",{parentName:"li"},"false")," by default, setting to ",Object(i.b)("inlineCode",{parentName:"li"},"true")," will reset mutation on component unmount, be adviced that nothing will be reset on unmount if there is any other active component with another ",Object(i.b)("inlineCode",{parentName:"li"},"useMutation")," of the same type"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"suspense: boolean"),": ",Object(i.b)("inlineCode",{parentName:"li"},"false")," by default, setting to ",Object(i.b)("inlineCode",{parentName:"li"},"true")," will activate suspense, which will need to be catched by a ",Object(i.b)("inlineCode",{parentName:"li"},"Suspense")," component"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"throwError: boolean"),": ",Object(i.b)("inlineCode",{parentName:"li"},"false")," by default, setting to ",Object(i.b)("inlineCode",{parentName:"li"},"true")," will throw error on mutation error, ready to be catched by a React error boundary component")),Object(i.b)("p",null,"To get some more ideas how to use it, see below example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"const deleteBook = id => ({\n  type: 'DELETE_BOOK',\n  request: { url: `/books/${id}`, method: 'delete' },\n});\n\nconst Book = () => {\n  const {\n    error,\n    loading,\n    pristine,\n    mutate, // callback to dispatch this mutation action any time\n  } = useQuery({\n    type: 'DELETE_BOOK',\n    action: deleteBook,\n    variables: [1],\n    autoReset: true,\n    suspense: true,\n    throwError: true,\n  });\n  // ...\n};\n")),Object(i.b)("h3",{id:"requestsprovider"},Object(i.b)("inlineCode",{parentName:"h3"},"RequestsProvider")),Object(i.b)("p",null,"This component is only necessary for SSR with suspense, but it is recommended to use it in any case, as it can change default values like ",Object(i.b)("inlineCode",{parentName:"p"},"autoReset")," for ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery")," and ",Object(i.b)("inlineCode",{parentName:"p"},"useMutation")," hooks and optionally setup Redux store for you. It is actually a wrapper around\n",Object(i.b)("inlineCode",{parentName:"p"},"Provider")," from ",Object(i.b)("inlineCode",{parentName:"p"},"react-redux"),", so you shouldn't use both, if you use ",Object(i.b)("inlineCode",{parentName:"p"},"RequestsProvider"),", don't use ",Object(i.b)("inlineCode",{parentName:"p"},"Provider"),"."),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"RequestsProvider")," accepts the following props:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"children"),": required, any React element, probably top level of you app"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"requestsConfig"),": the very same config you would pass to ",Object(i.b)("inlineCode",{parentName:"li"},"handleRequest")," from ",Object(i.b)("inlineCode",{parentName:"li"},"@redux-requests/core"),", not needed if you pass your\nown ",Object(i.b)("inlineCode",{parentName:"li"},"store")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"extraReducers"),": optional, object of your custom reducers which will be merged with ",Object(i.b)("inlineCode",{parentName:"li"},"requestsReducer"),", not needed if you pass\nyour own ",Object(i.b)("inlineCode",{parentName:"li"},"store")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"getMiddleware"),": optional, here you can pass extra Redux middleware, for example ",Object(i.b)("inlineCode",{parentName:"li"},"getMiddleware={requestsMiddleware => [thunkMiddleware, ...requestsMiddleware]}"),", not needed if you pass your own ",Object(i.b)("inlineCode",{parentName:"li"},"store")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"store"),": your store instance, pass it if you would like to create Redux store on your own"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"suspense: boolean"),": default to ",Object(i.b)("inlineCode",{parentName:"li"},"false"),", this value will be the default value for all ",Object(i.b)("inlineCode",{parentName:"li"},"useQuery")," and ",Object(i.b)("inlineCode",{parentName:"li"},"useMutation")," hooks"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"autoLoad: boolean"),": default to ",Object(i.b)("inlineCode",{parentName:"li"},"false"),", this value will be the default value for all ",Object(i.b)("inlineCode",{parentName:"li"},"useQuery")," hooks"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"autoReset: boolean"),": default to ",Object(i.b)("inlineCode",{parentName:"li"},"false"),", this value will be the default value for all ",Object(i.b)("inlineCode",{parentName:"li"},"useQuery")," and ",Object(i.b)("inlineCode",{parentName:"li"},"useMutation")," hooks"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"throwError: boolean"),": default to ",Object(i.b)("inlineCode",{parentName:"li"},"false"),", this value will be the default value for all ",Object(i.b)("inlineCode",{parentName:"li"},"useQuery")," and ",Object(i.b)("inlineCode",{parentName:"li"},"useMutation")," hooks"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"suspenseSsr: boolean"),": default to ",Object(i.b)("inlineCode",{parentName:"li"},"false"),", set to ",Object(i.b)("inlineCode",{parentName:"li"},"true")," when using suspense SSR"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"getStore"),": function called on ",Object(i.b)("inlineCode",{parentName:"li"},"RequestsProvider")," mount, it allows you to get access to ",Object(i.b)("inlineCode",{parentName:"li"},"store")," created by ",Object(i.b)("inlineCode",{parentName:"li"},"RequestsProvider"),", typically\nused in suspense SSR scenario"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"initialState"),": initial state for store created by ",Object(i.b)("inlineCode",{parentName:"li"},"RequestsProvider"),", not needed when passing your own ",Object(i.b)("inlineCode",{parentName:"li"},"store"),", typically only for SSR scenario")),Object(i.b)("p",null,"Simple example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import axios from 'axios';\nimport { RequestsProvider } from '@redux-requests/react';\nimport { createDriver } from '@redux-requests/axios';\n\n<RequestsProvider\n  requestsConfig={{\n    driver: createDriver(\n      axios.create({\n        baseURL: 'http://localhost:3000',\n      }),\n    ),\n  }}\n  autoReset\n>\n  <App />\n</RequestsProvider>;\n")),Object(i.b)("h3",{id:"requestserrorboundary"},Object(i.b)("inlineCode",{parentName:"h3"},"RequestsErrorBoundary")),Object(i.b)("p",null,"This is a ready to use error boundary component to catch errors from ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery")," and ",Object(i.b)("inlineCode",{parentName:"p"},"useMutation")," hooks, when using ",Object(i.b)("inlineCode",{parentName:"p"},"throwErrow: true"),".\nIt has a convenient ability to recover from error if catched error is fixed, for example by a query refetch."),Object(i.b)("p",null,"It has the following props:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"type"),": required, a type of a query or a mutation which you want to catch error for"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"requestKey"),": like above, required when you use a request with ",Object(i.b)("inlineCode",{parentName:"li"},"requestKey")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"autoReset: boolean"),": like for ",Object(i.b)("inlineCode",{parentName:"li"},"useQuery")," and ",Object(i.b)("inlineCode",{parentName:"li"},"useMutation"),", whether request should be reset on unmount"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"children"),": React element with ",Object(i.b)("inlineCode",{parentName:"li"},"useQuery")," or ",Object(i.b)("inlineCode",{parentName:"li"},"useMutation")," hook, for which you want to catch errors"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"fallback"),": render prop with error to render")),Object(i.b)("p",null,"Simple example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { RequestsErrorBoundary } from '@redux-requests/react';\n\n<RequestsErrorBoundary\n  type=\"FETCH-BOOK\"\n  autoReset\n  fallback={error => <div>Some error happened during books loading</div>}\n>\n  <Book />\n</RequestsErrorBoundary>;\n")),Object(i.b)("h3",{id:"usedispatchrequest"},Object(i.b)("inlineCode",{parentName:"h3"},"useDispatchRequest")),Object(i.b)("p",null,"Alias for ",Object(i.b)("inlineCode",{parentName:"p"},"useDispatch")," from ",Object(i.b)("inlineCode",{parentName:"p"},"react-redux"),", it works the same but it improves Typescript experience:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { useDispatchRequest } from '@redux-requests/react';\n\nconst BookFetcher = () => {\n  const dispatchRequest = useDispatchRequest();\n\n  return (\n    <button\n      onClick={async () => {\n        const { data, error } = await dispatch(fetchBook('1'));\n      }}\n    >\n      Fetch book\n    </button>\n  );\n};\n")),Object(i.b)("p",null,"See ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/guides/usage-with-typescript#usage-with-react"}),"this guide")," for more information."),Object(i.b)("h3",{id:"query"},Object(i.b)("inlineCode",{parentName:"h3"},"Query")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"Query")," is render prop alternative to ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery")," hook. However, for now this component is not in par with ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery"),".\nIt can be only used to read query state, not to automatically load queries and so on. For that, use either ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery"),"\nor create your own render prop component basing on ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery"),". Time will tell whether ",Object(i.b)("inlineCode",{parentName:"p"},"Query")," will be deprecated or\nwill match all ",Object(i.b)("inlineCode",{parentName:"p"},"useQuery")," functionality."),Object(i.b)("p",null,"Anyway, ",Object(i.b)("inlineCode",{parentName:"p"},"Query")," has the following props:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"type: string"),": type of query action, refer to ",Object(i.b)("inlineCode",{parentName:"li"},"getQuery")," from the core library"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"requestKey: string"),": pass it if you used ",Object(i.b)("inlineCode",{parentName:"li"},"requestKey")," in query action, refer to ",Object(i.b)("inlineCode",{parentName:"li"},"getQuery")," from the core library"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"multiple: boolean"),": refer to ",Object(i.b)("inlineCode",{parentName:"li"},"getQuery")," from the core library"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"defaultData"),": refer to ",Object(i.b)("inlineCode",{parentName:"li"},"getQuery")," from the core library"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"selector"),": if you already have a query selector, pass it here instead of ",Object(i.b)("inlineCode",{parentName:"li"},"type")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"children")," - render function receiving object with data, loading flag and error property"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"component")," - alternative prop to children, you can pass your custom component here, which will receive data, loading and error props, plus any additional props passed to ",Object(i.b)("inlineCode",{parentName:"li"},"Query")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"isDataEmpty: query => boolean"),": function which defines when ",Object(i.b)("inlineCode",{parentName:"li"},"data")," is empty, by default data as empty array and falsy value like ",Object(i.b)("inlineCode",{parentName:"li"},"null"),", ",Object(i.b)("inlineCode",{parentName:"li"},"undefined")," is considered as empty\nwhen data is updated - it will still show during initial fetch, but ill not for subsequent requests"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"noDataMessage"),": ",Object(i.b)("inlineCode",{parentName:"li"},"string")," or any React node, like ",Object(i.b)("inlineCode",{parentName:"li"},"<div>message</div>"),", which will be rendered when ",Object(i.b)("inlineCode",{parentName:"li"},"data")," is empty"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"errorComponent"),": custom React component, which will be rendered on error, receives ",Object(i.b)("inlineCode",{parentName:"li"},"error")," prop, ",Object(i.b)("inlineCode",{parentName:"li"},"null")," by default"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"errorComponentProps"),": extra props which will be passed to ",Object(i.b)("inlineCode",{parentName:"li"},"errorComponent")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"loadingComponent")," custom React component, which will be rndered when request is pending, useful for showing spinners,\nreceives ",Object(i.b)("inlineCode",{parentName:"li"},"downloadProgress")," and ",Object(i.b)("inlineCode",{parentName:"li"},"uploadProgress")," props, useful when ",Object(i.b)("inlineCode",{parentName:"li"},"requestAction.meta.measureDownloadProgress")," or\n",Object(i.b)("inlineCode",{parentName:"li"},"requestAction.meta.measureUploadProgress")," is ",Object(i.b)("inlineCode",{parentName:"li"},"true")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"loadingComponentProps"),": extra props which will be passed to ",Object(i.b)("inlineCode",{parentName:"li"},"loadingComponent"),"\nspinners, ",Object(i.b)("inlineCode",{parentName:"li"},"null")," by default"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"showLoaderDuringRefetch: boolean"),": ",Object(i.b)("inlineCode",{parentName:"li"},"true")," by default, whether ",Object(i.b)("inlineCode",{parentName:"li"},"loadingComponent")," will be shown on data refetch\nor not, if ",Object(i.b)("inlineCode",{parentName:"li"},"false")," you won't see spinner even when data is being loaded if you already have some data from a previous requests"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"action"),": useful only when you use Typescript, see details ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/guides/usage-with-typescript#automatic-data-inference"}),"here"))),Object(i.b)("p",null,"Minimalistic example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import { Query } from '@redux-requests/react';\n\n<Query\n  type={REQUEST_TYPE}\n  // or selector={myQuerySelector}\n>\n  {({ data }) => <div>{data}</div>}\n</Query>;\n")),Object(i.b)("p",null,"or with ",Object(i.b)("inlineCode",{parentName:"p"},"component")," prop:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import { Query } from '@redux-requests/react';\n\nconst DataComponent = ({ query, extraLabelProp }) => (\n  <div>\n    <h1>{extraLabelProp}</h1>\n    {query.data}\n  </div>\n);\n\n<Query\n  type={REQUEST_TYPE}\n  // or selector={myQuerySelector}\n  component={DataComponent}\n  extraLabelProp=\"label\"\n/>;\n")),Object(i.b)("p",null,"or with all props:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import { Query } from '@redux-requests/react';\n\nconst LoadingComponent = ({ label }) => (\n  <div>\n    ...loading\n    {label}\n  </div>\n);\n\nconst ErrorComponent = ({ error, label }) => (\n  <div>\n    Error with status code {error.status}\n    {label}\n  </div>\n);\n\n<Query\n  type={REQUEST_TYPE}\n  // or selector={myQuerySelector}\n  isDataEmpty={query =>\n    Array.isArray(query.data) ? query.data.length === 0 : !query.data\n  }\n  showLoaderDuringRefetch={false}\n  noDataMessage=\"There is no data\"\n  errorComponent={ErrorComponent}\n  errorComponentProps={{ label: 'Error label' }}\n  loadingComponent={LoadingComponent}\n  loadingComponentProps={{ label: 'Loading label' }}\n>\n  {({ data }) => <div>{data}</div>}\n</Query>;\n")),Object(i.b)("h3",{id:"mutation"},Object(i.b)("inlineCode",{parentName:"h3"},"Mutation")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"Mutation")," is render prop alternative to ",Object(i.b)("inlineCode",{parentName:"p"},"useMutation")," hook. However, for now this component is not in par with ",Object(i.b)("inlineCode",{parentName:"p"},"useMutation"),".\nIt can be only used to read mutation state, not to automatically reset mutations and so on. For that, use either ",Object(i.b)("inlineCode",{parentName:"p"},"useMutation"),"\nor create your own render prop component basing on ",Object(i.b)("inlineCode",{parentName:"p"},"useMutation"),". Time will tell whether ",Object(i.b)("inlineCode",{parentName:"p"},"Mutation")," will be deprecated or\nwill match all ",Object(i.b)("inlineCode",{parentName:"p"},"useMutation")," functionality."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"type: string"),": type of mutation action, refer to ",Object(i.b)("inlineCode",{parentName:"li"},"getMutation")," from the core library"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"requestKey: string"),": pass it if you used ",Object(i.b)("inlineCode",{parentName:"li"},"requestKey")," in mutation action, refer to ",Object(i.b)("inlineCode",{parentName:"li"},"getMutation")," from the core library"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"selector"),": if you already have a mutation selector, pass it here instead of type"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"children")," - render function receiving object with loading flag and error property"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"component")," - alternative prop to children, you can pass your custom component here, which will receive loading and error props, plus any additional props passed to Mutation")),Object(i.b)("p",null,"You use it like this:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import { Mutation } from '@redux-requests/react';\n\n<Mutation\n  type={MUTATION_TYPE}\n  // or selector={myMutationSelector}\n>\n  {({ loading, error }) => {\n    if (error) {\n      return <div>Something went wrong</div>;\n    }\n\n    return (\n      <button onClick={dispatchSomeMutation} disabled={loading}>\n        Send mutation {loading && '...'}\n      </button>\n    );\n  }}\n</Mutation>;\n")))}u.isMDXComponent=!0},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),u=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},s=function(e){var t=u(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,c=b(e,["components","mdxType","originalType","parentName"]),s=u(n),d=a,m=s["".concat(o,".").concat(d)]||s[d]||p[d]||i;return n?r.a.createElement(m,l({ref:t},c,{components:n})):r.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var b in t)hasOwnProperty.call(t,b)&&(l[b]=t[b]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);